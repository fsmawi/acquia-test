<div *ngIf="isInitialized">
  <app-action-header title="Job List"
                     [appId]="appId"
                     [showViewInfo]="true"
                     [showStartJob]="jobs?.length">
  </app-action-header>

  <app-job-summary *ngIf="lastJob && appId"
                   [isProgressBarRequired]="false"
                   [appId]="appId"
                   [job]="lastJob"></app-job-summary>
  <div *ngIf="jobs && jobs.length" id="filter" class="flex-container" fxLayout="row" fxLayoutAlign="end center" [@fadeInUp]>
    <input class="flex-item"
           fxFlex="none"
           fxFlex.xs="100%"
           type="search"
           size="30"
           placeholder="Filter jobs by branch or status"
           mdTooltip="Search by status;
                      Search succeeded or failed jobs typing keywords: Pass, Success, Succeeded, fail, failed, error, errored;
                      Search by branch name;
                      Search by trigger type typing keywords:  PR, or pull request, branch, pull."
           mdTooltipPosition="below"
           value="{{filterText}}"
           (input)="filterSubject.next($event.target.value)">
  </div>
  <e-card *ngIf="isInitialized">
    <e-card-header>
      Activity
      <div id="filter-info">
        <span id="filtered-text" *ngIf="filterText !== ''"> filtered with "{{ filterText }}". </span>
        <a id="clear-filter" *ngIf="filterText !== ''" (click)="clearFilter()">Clear Filter</a>
      </div>
      <a id="repoInfo"
         appIframeLink="/application/{{appId}}"
         appSegmentOn="click"
         [segmentEventData]="{appId: appId}"
         segmentEventIdentifier="ClickRepoNameApplicationInfo"
         appLiftOn="click"
         [liftEventData]="{appId: appId}"
         liftEventName="ClickRepoNameApplicationInfo">
        <e-svg-icon *ngIf="vcsType === 'github'"
                    type="logos__github"
                    size="medium"
                    mdTooltip="Using GitHub"
                    mdTooltipPosition="left">
        </e-svg-icon>
        <svg *ngIf="vcsType ==='acquia-git'"
             class="el-iconography__icon el-iconography__icon--is-medium"
             mdTooltip="Using Acquia Git"
             mdTooltipPosition="left">
          <image height="28px" xlink:href="../assets/acquia.svg" width="28px"></image>
        </svg>
        {{repoFullName}}
      </a>
    </e-card-header>
    <e-card-content>

      <!-- No Jobs? -->
      <app-no-jobs [appId]="appId" [vcsType]="vcsType" *ngIf="jobs && !jobs.length"></app-no-jobs>

      <!--List of Jobs-->
      <app-job-list [appId]="appId" [jobs]="filteredJobs" *ngIf="jobs.length"></app-job-list>
    </e-card-content>
  </e-card>
</div>

<e-progress *ngIf="loadingJobs && !jobs.length && !isInitialized"
            progressType="indeterminate"
            progressVariant="dots">
</e-progress>
